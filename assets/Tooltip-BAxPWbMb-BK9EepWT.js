import{r as u,i as ot,R as $e,c as st,a as Re,o as it,s as ut,f as at,b as we,g as We,j as B,d as Y,e as ce,h as ct,k as le,l as lt,m as ft,n as dt,p as Se,q as mt}from"./index-DUhUz04Z.js";/*!
* tabbable 6.4.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var vt=["input:not([inert]):not([inert] *)","select:not([inert]):not([inert] *)","textarea:not([inert]):not([inert] *)","a[href]:not([inert]):not([inert] *)","button:not([inert]):not([inert] *)","[tabindex]:not(slot):not([inert]):not([inert] *)","audio[controls]:not([inert]):not([inert] *)","video[controls]:not([inert]):not([inert] *)",'[contenteditable]:not([contenteditable="false"]):not([inert]):not([inert] *)',"details>summary:first-of-type:not([inert]):not([inert] *)","details:not([inert]):not([inert] *)"],be=vt.join(","),Be=typeof Element>"u",J=Be?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ne=!Be&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},re=function(e,n){var r;n===void 0&&(n=!0);var o=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),i=o===""||o==="true",s=i||n&&e&&(typeof e.closest=="function"?e.closest("[inert]"):re(e.parentNode));return s},pt=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},gt=function(e,n,r){if(re(e))return[];var o=Array.prototype.slice.apply(e.querySelectorAll(be));return n&&J.call(e,be)&&o.unshift(e),o=o.filter(r),o},he=function(e,n,r){for(var o=[],i=Array.from(e);i.length;){var s=i.shift();if(!re(s,!1))if(s.tagName==="SLOT"){var a=s.assignedElements(),l=a.length?a:s.children,f=he(l,!0,r);r.flatten?o.push.apply(o,f):o.push({scopeParent:s,candidates:f})}else{var d=J.call(s,be);d&&r.filter(s)&&(n||!e.includes(s))&&o.push(s);var m=s.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(s),h=!re(m,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(m&&h){var v=he(m===!0?s.children:m.children,!0,r);r.flatten?o.push.apply(o,v):o.push({scopeParent:s,candidates:v})}else i.unshift.apply(i,s.children)}}return o},Ke=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Ve=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||pt(e))&&!Ke(e)?0:e.tabIndex},bt=function(e,n){var r=Ve(e);return r<0&&n&&!Ke(e)?0:r},ht=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},Ye=function(e){return e.tagName==="INPUT"},yt=function(e){return Ye(e)&&e.type==="hidden"},Rt=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},Et=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},xt=function(e){if(!e.name)return!0;var n=e.form||ne(e),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(e.name));else try{o=r(e.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var i=Et(o,e.form);return!i||i===e},wt=function(e){return Ye(e)&&e.type==="radio"},St=function(e){return wt(e)&&!xt(e)},Ct=function(e){var n,r=e&&ne(e),o=(n=r)===null||n===void 0?void 0:n.host,i=!1;if(r&&r!==e){var s,a,l;for(i=!!((s=o)!==null&&s!==void 0&&(a=s.ownerDocument)!==null&&a!==void 0&&a.contains(o)||e!=null&&(l=e.ownerDocument)!==null&&l!==void 0&&l.contains(e));!i&&o;){var f,d,m;r=ne(o),o=(f=r)===null||f===void 0?void 0:f.host,i=!!((d=o)!==null&&d!==void 0&&(m=d.ownerDocument)!==null&&m!==void 0&&m.contains(o))}}return i},Ce=function(e){var n=e.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},Tt=function(e,n){var r=n.displayCheck,o=n.getShadowRoot;if(r==="full-native"&&"checkVisibility"in e){var i=e.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!i}if(getComputedStyle(e).visibility==="hidden")return!0;var s=J.call(e,"details>summary:first-of-type"),a=s?e.parentElement:e;if(J.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="full-native"||r==="legacy-full"){if(typeof o=="function"){for(var l=e;e;){var f=e.parentElement,d=ne(e);if(f&&!f.shadowRoot&&o(f)===!0)return Ce(e);e.assignedSlot?e=e.assignedSlot:!f&&d!==e.ownerDocument?e=d.host:e=f}e=l}if(Ct(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return Ce(e);return!1},Pt=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return J.call(n,"fieldset[disabled] *")?!0:!o.contains(e)}return!0}n=n.parentElement}return!1},It=function(e,n){return!(n.disabled||yt(n)||Tt(n,e)||Rt(n)||Pt(n))},Te=function(e,n){return!(St(n)||Ve(n)<0||!It(e,n))},Mt=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},qe=function(e){var n=[],r=[];return e.forEach(function(o,i){var s=!!o.scopeParent,a=s?o.scopeParent:o,l=bt(a,s),f=s?qe(o.candidates):a;l===0?s?n.push.apply(n,f):n.push(a):r.push({documentOrder:i,tabIndex:l,item:o,isScope:s,content:f})}),r.sort(ht).reduce(function(o,i){return i.isScope?o.push.apply(o,i.content):o.push(i.content),o},[]).concat(n)},He=function(e,n){n=n||{};var r;return n.getShadowRoot?r=he([e],n.includeContainer,{filter:Te.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:Mt}):r=gt(e,n.includeContainer,Te.bind(null,n)),qe(r)};function Lt(){return/apple/i.test(navigator.vendor)}const Pe="data-floating-ui-focusable";function Ot(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function oe(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&ot(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function Q(t){return"composedPath"in t?t.composedPath()[0]:t.target}function fe(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function Dt(t){return t.matches("html,body")}function X(t){return(t==null?void 0:t.ownerDocument)||document}function At(t){return t?t.hasAttribute(Pe)?t:t.querySelector("["+Pe+"]")||t:null}function ee(t,e,n){return n===void 0&&(n=!0),t.filter(o=>{var i;return o.parentId===e&&(!n||((i=o.context)==null?void 0:i.open))}).flatMap(o=>[o,...ee(t,o.id,n)])}function kt(t){return"nativeEvent"in t}function ye(t,e){const n=["mouse","pen"];return n.push("",void 0),n.includes(t)}var Ft=typeof document<"u",Nt=function(){},V=Ft?u.useLayoutEffect:Nt;const _t={...$e};function G(t){const e=u.useRef(t);return V(()=>{e.current=t}),e}const jt=_t.useInsertionEffect,$t=jt||(t=>t());function H(t){const e=u.useRef(()=>{});return $t(()=>{e.current=t}),u.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}const Ue=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function Xe(t,e){const n=He(t,Ue()),r=n.length;if(r===0)return;const o=Ot(X(t)),i=n.indexOf(o),s=i===-1?e===1?0:r-1:i+e;return n[s]}function Wt(t){return Xe(X(t).body,1)||t}function Bt(t){return Xe(X(t).body,-1)||t}function de(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!oe(n,r)}function Kt(t){He(t,Ue()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function Ie(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}var Vt=typeof document<"u",Yt=function(){},te=Vt?u.useLayoutEffect:Yt;function se(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!se(t[r],e[r]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,o[r]))return!1;for(r=n;r--!==0;){const i=o[r];if(!(i==="_owner"&&t.$$typeof)&&!se(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function Ge(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Me(t,e){const n=Ge(t);return Math.round(e*n)/n}function me(t){const e=u.useRef(t);return te(()=>{e.current=t}),e}function qt(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:i,floating:s}={},transform:a=!0,whileElementsMounted:l,open:f}=t,[d,m]=u.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[h,v]=u.useState(r);se(h,r)||v(r);const[T,p]=u.useState(null),[E,S]=u.useState(null),x=u.useCallback(c=>{c!==A.current&&(A.current=c,p(c))},[]),R=u.useCallback(c=>{c!==O.current&&(O.current=c,S(c))},[]),w=i||T,I=s||E,A=u.useRef(null),O=u.useRef(null),M=u.useRef(d),k=l!=null,F=me(l),W=me(o),N=me(f),_=u.useCallback(()=>{if(!A.current||!O.current)return;const c={placement:e,strategy:n,middleware:h};W.current&&(c.platform=W.current),st(A.current,O.current,c).then(y=>{const C={...y,isPositioned:N.current!==!1};g.current&&!se(M.current,C)&&(M.current=C,Re.flushSync(()=>{m(C)}))})},[h,e,n,W,N]);te(()=>{f===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,m(c=>({...c,isPositioned:!1})))},[f]);const g=u.useRef(!1);te(()=>(g.current=!0,()=>{g.current=!1}),[]),te(()=>{if(w&&(A.current=w),I&&(O.current=I),w&&I){if(F.current)return F.current(w,I,_);_()}},[w,I,_,F,k]);const L=u.useMemo(()=>({reference:A,floating:O,setReference:x,setFloating:R}),[x,R]),D=u.useMemo(()=>({reference:w,floating:I}),[w,I]),b=u.useMemo(()=>{const c={position:n,left:0,top:0};if(!D.floating)return c;const y=Me(D.floating,d.x),C=Me(D.floating,d.y);return a?{...c,transform:"translate("+y+"px, "+C+"px)",...Ge(D.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:y,top:C}},[n,a,D.floating,d.x,d.y]);return u.useMemo(()=>({...d,update:_,refs:L,elements:D,floatingStyles:b}),[d,_,L,D,b])}const Ht=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:o}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?we({element:r.current,padding:o}).fn(n):{}:r?we({element:r,padding:o}).fn(n):{}}}},Ut=(t,e)=>({...it(t),options:[t,e]}),Xt=(t,e)=>({...ut(t),options:[t,e]}),Gt=(t,e)=>({...at(t),options:[t,e]}),Zt=(t,e)=>({...Ht(t),options:[t,e]}),zt="data-floating-ui-focusable",Le="active",Oe="selected",Qt={...$e};let De=!1,Jt=0;const Ae=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Jt++;function en(){const[t,e]=u.useState(()=>De?Ae():void 0);return V(()=>{t==null&&e(Ae())},[]),u.useEffect(()=>{De=!0},[]),t}const tn=Qt.useId,ie=tn||en,nn=u.forwardRef(function(e,n){const{context:{placement:r,elements:{floating:o},middlewareData:{arrow:i,shift:s}},width:a=14,height:l=7,tipRadius:f=0,strokeWidth:d=0,staticOffset:m,stroke:h,d:v,style:{transform:T,...p}={},...E}=e,S=ie(),[x,R]=u.useState(!1);if(V(()=>{if(!o)return;We(o).direction==="rtl"&&R(!0)},[o]),!o)return null;const[w,I]=r.split("-"),A=w==="top"||w==="bottom";let O=m;(A&&s!=null&&s.x||!A&&s!=null&&s.y)&&(O=null);const M=d*2,k=M/2,F=a/2*(f/-8+1),W=l/2*f/4,N=!!v,_=O&&I==="end"?"bottom":"top";let g=O&&I==="end"?"right":"left";O&&x&&(g=I==="end"?"left":"right");const L=(i==null?void 0:i.x)!=null?O||i.x:"",D=(i==null?void 0:i.y)!=null?O||i.y:"",b=v||"M0,0"+(" H"+a)+(" L"+(a-F)+","+(l-W))+(" Q"+a/2+","+l+" "+F+","+(l-W))+" Z",c={top:N?"rotate(180deg)":"",left:N?"rotate(90deg)":"rotate(-90deg)",bottom:N?"":"rotate(180deg)",right:N?"rotate(-90deg)":"rotate(90deg)"}[w];return B.jsxs("svg",{...E,"aria-hidden":!0,ref:n,width:N?a:a+M,height:a,viewBox:"0 0 "+a+" "+(l>a?l:a),style:{position:"absolute",pointerEvents:"none",[g]:L,[_]:D,[w]:A||N?"100%":"calc(100% - "+M/2+"px)",transform:[c,T].filter(y=>!!y).join(" "),...p},children:[M>0&&B.jsx("path",{clipPath:"url(#"+S+")",fill:"none",stroke:h,strokeWidth:M+(v?0:1),d:b}),B.jsx("path",{stroke:M&&!v?E.fill:"none",d:b}),B.jsx("clipPath",{id:S,children:B.jsx("rect",{x:-k,y:k*(N?-1:1),width:a+M,height:a})})]})});function rn(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(o=>o(n))},on(e,n){t.has(e)||t.set(e,new Set),t.get(e).add(n)},off(e,n){var r;(r=t.get(e))==null||r.delete(n)}}}const on=u.createContext(null),sn=u.createContext(null),Ee=()=>{var t;return((t=u.useContext(on))==null?void 0:t.id)||null},xe=()=>u.useContext(sn);function ue(t){return"data-floating-ui-"+t}function q(t){t.current!==-1&&(clearTimeout(t.current),t.current=-1)}const ke=ue("safe-polygon");function ve(t,e,n){if(n&&!ye(n))return 0;if(typeof t=="number")return t;if(typeof t=="function"){const r=t();return typeof r=="number"?r:r==null?void 0:r[e]}return t==null?void 0:t[e]}function pe(t){return typeof t=="function"?t():t}function un(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:o,events:i,elements:s}=t,{enabled:a=!0,delay:l=0,handleClose:f=null,mouseOnly:d=!1,restMs:m=0,move:h=!0}=e,v=xe(),T=Ee(),p=G(f),E=G(l),S=G(n),x=G(m),R=u.useRef(),w=u.useRef(-1),I=u.useRef(),A=u.useRef(-1),O=u.useRef(!0),M=u.useRef(!1),k=u.useRef(()=>{}),F=u.useRef(!1),W=H(()=>{var b;const c=(b=o.current.openEvent)==null?void 0:b.type;return(c==null?void 0:c.includes("mouse"))&&c!=="mousedown"});u.useEffect(()=>{if(!a)return;function b(c){let{open:y}=c;y||(q(w),q(A),O.current=!0,F.current=!1)}return i.on("openchange",b),()=>{i.off("openchange",b)}},[a,i]),u.useEffect(()=>{if(!a||!p.current||!n)return;function b(y){W()&&r(!1,y,"hover")}const c=X(s.floating).documentElement;return c.addEventListener("mouseleave",b),()=>{c.removeEventListener("mouseleave",b)}},[s.floating,n,r,a,p,W]);const N=u.useCallback(function(b,c,y){c===void 0&&(c=!0),y===void 0&&(y="hover");const C=ve(E.current,"close",R.current);C&&!I.current?(q(w),w.current=window.setTimeout(()=>r(!1,b,y),C)):c&&(q(w),r(!1,b,y))},[E,r]),_=H(()=>{k.current(),I.current=void 0}),g=H(()=>{if(M.current){const b=X(s.floating).body;b.style.pointerEvents="",b.removeAttribute(ke),M.current=!1}}),L=H(()=>o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1);u.useEffect(()=>{if(!a)return;function b(P){if(q(w),O.current=!1,d&&!ye(R.current)||pe(x.current)>0&&!ve(E.current,"open"))return;const j=ve(E.current,"open",R.current);j?w.current=window.setTimeout(()=>{S.current||r(!0,P,"hover")},j):n||r(!0,P,"hover")}function c(P){if(L()){g();return}k.current();const j=X(s.floating);if(q(A),F.current=!1,p.current&&o.current.floatingContext){n||q(w),I.current=p.current({...o.current.floatingContext,tree:v,x:P.clientX,y:P.clientY,onClose(){g(),_(),L()||N(P,!0,"safe-polygon")}});const $=I.current;j.addEventListener("mousemove",$),k.current=()=>{j.removeEventListener("mousemove",$)};return}(R.current==="touch"?!oe(s.floating,P.relatedTarget):!0)&&N(P)}function y(P){L()||o.current.floatingContext&&(p.current==null||p.current({...o.current.floatingContext,tree:v,x:P.clientX,y:P.clientY,onClose(){g(),_(),L()||N(P)}})(P))}function C(){q(w)}function K(P){L()||N(P,!1)}if(Y(s.domReference)){const P=s.domReference,j=s.floating;return n&&P.addEventListener("mouseleave",y),h&&P.addEventListener("mousemove",b,{once:!0}),P.addEventListener("mouseenter",b),P.addEventListener("mouseleave",c),j&&(j.addEventListener("mouseleave",y),j.addEventListener("mouseenter",C),j.addEventListener("mouseleave",K)),()=>{n&&P.removeEventListener("mouseleave",y),h&&P.removeEventListener("mousemove",b),P.removeEventListener("mouseenter",b),P.removeEventListener("mouseleave",c),j&&(j.removeEventListener("mouseleave",y),j.removeEventListener("mouseenter",C),j.removeEventListener("mouseleave",K))}}},[s,a,t,d,h,N,_,g,r,n,S,v,E,p,o,L,x]),V(()=>{var b;if(a&&n&&(b=p.current)!=null&&(b=b.__options)!=null&&b.blockPointerEvents&&W()){M.current=!0;const y=s.floating;if(Y(s.domReference)&&y){var c;const C=X(s.floating).body;C.setAttribute(ke,"");const K=s.domReference,P=v==null||(c=v.nodesRef.current.find(j=>j.id===T))==null||(c=c.context)==null?void 0:c.elements.floating;return P&&(P.style.pointerEvents=""),C.style.pointerEvents="none",K.style.pointerEvents="auto",y.style.pointerEvents="auto",()=>{C.style.pointerEvents="",K.style.pointerEvents="",y.style.pointerEvents=""}}}},[a,n,T,s,v,p,W]),V(()=>{n||(R.current=void 0,F.current=!1,_(),g())},[n,_,g]),u.useEffect(()=>()=>{_(),q(w),q(A),g()},[a,s.domReference,_,g]);const D=u.useMemo(()=>{function b(c){R.current=c.pointerType}return{onPointerDown:b,onPointerEnter:b,onMouseMove(c){const{nativeEvent:y}=c;function C(){!O.current&&!S.current&&r(!0,y,"hover")}d&&!ye(R.current)||n||pe(x.current)===0||F.current&&c.movementX**2+c.movementY**2<2||(q(A),R.current==="touch"?C():(F.current=!0,A.current=window.setTimeout(C,pe(x.current))))}}},[d,r,n,S,x]);return u.useMemo(()=>a?{reference:D}:{},[a,D])}const an={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},Fe=u.forwardRef(function(e,n){const[r,o]=u.useState();V(()=>{Lt()&&o("button")},[]);const i={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[ue("focus-guard")]:"",style:an};return B.jsx("span",{...e,...i})}),cn={clipPath:"inset(50%)",position:"fixed",top:0,left:0},Ze=u.createContext(null),Ne=ue("portal");function ln(t){t===void 0&&(t={});const{id:e,root:n}=t,r=ie(),o=dn(),[i,s]=u.useState(null),a=u.useRef(null);return V(()=>()=>{i==null||i.remove(),queueMicrotask(()=>{a.current=null})},[i]),V(()=>{if(!r||a.current)return;const l=e?document.getElementById(e):null;if(!l)return;const f=document.createElement("div");f.id=r,f.setAttribute(Ne,""),l.appendChild(f),a.current=f,s(f)},[e,r]),V(()=>{if(n===null||!r||a.current)return;let l=n||(o==null?void 0:o.portalNode);l&&!ct(l)&&(l=l.current),l=l||document.body;let f=null;e&&(f=document.createElement("div"),f.id=e,l.appendChild(f));const d=document.createElement("div");d.id=r,d.setAttribute(Ne,""),l=f||l,l.appendChild(d),a.current=d,s(d)},[e,n,r,o]),i}function fn(t){const{children:e,id:n,root:r,preserveTabOrder:o=!0}=t,i=ln({id:n,root:r}),[s,a]=u.useState(null),l=u.useRef(null),f=u.useRef(null),d=u.useRef(null),m=u.useRef(null),h=s==null?void 0:s.modal,v=s==null?void 0:s.open,T=!!s&&!s.modal&&s.open&&o&&!!(r||i);return u.useEffect(()=>{if(!i||!o||h)return;function p(E){i&&de(E)&&(E.type==="focusin"?Ie:Kt)(i)}return i.addEventListener("focusin",p,!0),i.addEventListener("focusout",p,!0),()=>{i.removeEventListener("focusin",p,!0),i.removeEventListener("focusout",p,!0)}},[i,o,h]),u.useEffect(()=>{i&&(v||Ie(i))},[v,i]),B.jsxs(Ze.Provider,{value:u.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:l,afterOutsideRef:f,beforeInsideRef:d,afterInsideRef:m,portalNode:i,setFocusManagerState:a}),[o,i]),children:[T&&i&&B.jsx(Fe,{"data-type":"outside",ref:l,onFocus:p=>{if(de(p,i)){var E;(E=d.current)==null||E.focus()}else{const S=s?s.domReference:null,x=Bt(S);x==null||x.focus()}}}),T&&i&&B.jsx("span",{"aria-owns":i.id,style:cn}),i&&Re.createPortal(e,i),T&&i&&B.jsx(Fe,{"data-type":"outside",ref:f,onFocus:p=>{if(de(p,i)){var E;(E=m.current)==null||E.focus()}else{const S=s?s.domReference:null,x=Wt(S);x==null||x.focus(),s!=null&&s.closeOnFocusOut&&(s==null||s.onOpenChange(!1,p.nativeEvent,"focus-out"))}}})]})}const dn=()=>u.useContext(Ze),mn={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},vn={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},_e=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function pn(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:o,dataRef:i}=t,{enabled:s=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:m="pointerdown",ancestorScroll:h=!1,bubbles:v,capture:T}=e,p=xe(),E=H(typeof l=="function"?l:()=>!1),S=typeof l=="function"?E:l,x=u.useRef(!1),{escapeKey:R,outsidePress:w}=_e(v),{escapeKey:I,outsidePress:A}=_e(T),O=u.useRef(!1),M=H(g=>{var L;if(!n||!s||!a||g.key!=="Escape"||O.current)return;const D=(L=i.current.floatingContext)==null?void 0:L.nodeId,b=p?ee(p.nodesRef.current,D):[];if(!R&&(g.stopPropagation(),b.length>0)){let c=!0;if(b.forEach(y=>{var C;if((C=y.context)!=null&&C.open&&!y.context.dataRef.current.__escapeKeyBubbles){c=!1;return}}),!c)return}r(!1,kt(g)?g.nativeEvent:g,"escape-key")}),k=H(g=>{var L;const D=()=>{var b;M(g),(b=Q(g))==null||b.removeEventListener("keydown",D)};(L=Q(g))==null||L.addEventListener("keydown",D)}),F=H(g=>{var L;const D=i.current.insideReactTree;i.current.insideReactTree=!1;const b=x.current;if(x.current=!1,f==="click"&&b||D||typeof S=="function"&&!S(g))return;const c=Q(g),y="["+ue("inert")+"]",C=X(o.floating).querySelectorAll(y);let K=Y(c)?c:null;for(;K&&!le(K);){const $=lt(K);if(le($)||!Y($))break;K=$}if(C.length&&Y(c)&&!Dt(c)&&!oe(c,o.floating)&&Array.from(C).every($=>!oe(K,$)))return;if(ft(c)&&_){const $=le(c),U=We(c),z=/auto|scroll/,ze=$||z.test(U.overflowX),Qe=$||z.test(U.overflowY),Je=ze&&c.clientWidth>0&&c.scrollWidth>c.clientWidth,et=Qe&&c.clientHeight>0&&c.scrollHeight>c.clientHeight,tt=U.direction==="rtl",nt=et&&(tt?g.offsetX<=c.offsetWidth-c.clientWidth:g.offsetX>c.clientWidth),rt=Je&&g.offsetY>c.clientHeight;if(nt||rt)return}const P=(L=i.current.floatingContext)==null?void 0:L.nodeId,j=p&&ee(p.nodesRef.current,P).some($=>{var U;return fe(g,(U=$.context)==null?void 0:U.elements.floating)});if(fe(g,o.floating)||fe(g,o.domReference)||j)return;const ae=p?ee(p.nodesRef.current,P):[];if(ae.length>0){let $=!0;if(ae.forEach(U=>{var z;if((z=U.context)!=null&&z.open&&!U.context.dataRef.current.__outsidePressBubbles){$=!1;return}}),!$)return}r(!1,g,"outside-press")}),W=H(g=>{var L;const D=()=>{var b;F(g),(b=Q(g))==null||b.removeEventListener(f,D)};(L=Q(g))==null||L.addEventListener(f,D)});u.useEffect(()=>{if(!n||!s)return;i.current.__escapeKeyBubbles=R,i.current.__outsidePressBubbles=w;let g=-1;function L(C){r(!1,C,"ancestor-scroll")}function D(){window.clearTimeout(g),O.current=!0}function b(){g=window.setTimeout(()=>{O.current=!1},dt()?5:0)}const c=X(o.floating);a&&(c.addEventListener("keydown",I?k:M,I),c.addEventListener("compositionstart",D),c.addEventListener("compositionend",b)),S&&c.addEventListener(f,A?W:F,A);let y=[];return h&&(Y(o.domReference)&&(y=ce(o.domReference)),Y(o.floating)&&(y=y.concat(ce(o.floating))),!Y(o.reference)&&o.reference&&o.reference.contextElement&&(y=y.concat(ce(o.reference.contextElement)))),y=y.filter(C=>{var K;return C!==((K=c.defaultView)==null?void 0:K.visualViewport)}),y.forEach(C=>{C.addEventListener("scroll",L,{passive:!0})}),()=>{a&&(c.removeEventListener("keydown",I?k:M,I),c.removeEventListener("compositionstart",D),c.removeEventListener("compositionend",b)),S&&c.removeEventListener(f,A?W:F,A),y.forEach(C=>{C.removeEventListener("scroll",L)}),window.clearTimeout(g)}},[i,o,a,S,f,n,r,h,s,R,w,M,I,k,F,A,W]),u.useEffect(()=>{i.current.insideReactTree=!1},[i,S,f]);const N=u.useMemo(()=>({onKeyDown:M,...d&&{[mn[m]]:g=>{r(!1,g.nativeEvent,"reference-press")},...m!=="click"&&{onClick(g){r(!1,g.nativeEvent,"reference-press")}}}}),[M,r,d,m]),_=u.useMemo(()=>({onKeyDown:M,onMouseDown(){x.current=!0},onMouseUp(){x.current=!0},[vn[f]]:()=>{i.current.insideReactTree=!0}}),[M,f,i]);return u.useMemo(()=>s?{reference:N,floating:_}:{},[s,N,_])}function gn(t){const{open:e=!1,onOpenChange:n,elements:r}=t,o=ie(),i=u.useRef({}),[s]=u.useState(()=>rn()),a=Ee()!=null,[l,f]=u.useState(r.reference),d=H((v,T,p)=>{i.current.openEvent=v?T:void 0,s.emit("openchange",{open:v,event:T,reason:p,nested:a}),n==null||n(v,T,p)}),m=u.useMemo(()=>({setPositionReference:f}),[]),h=u.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return u.useMemo(()=>({dataRef:i,open:e,onOpenChange:d,elements:h,events:s,floatingId:o,refs:m}),[e,d,h,s,o,m])}function bn(t){t===void 0&&(t={});const{nodeId:e}=t,n=gn({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,o=r.elements,[i,s]=u.useState(null),[a,l]=u.useState(null),d=(o==null?void 0:o.domReference)||i,m=u.useRef(null),h=xe();V(()=>{d&&(m.current=d)},[d]);const v=qt({...t,elements:{...o,...a&&{reference:a}}}),T=u.useCallback(R=>{const w=Y(R)?{getBoundingClientRect:()=>R.getBoundingClientRect(),getClientRects:()=>R.getClientRects(),contextElement:R}:R;l(w),v.refs.setReference(w)},[v.refs]),p=u.useCallback(R=>{(Y(R)||R===null)&&(m.current=R,s(R)),(Y(v.refs.reference.current)||v.refs.reference.current===null||R!==null&&!Y(R))&&v.refs.setReference(R)},[v.refs]),E=u.useMemo(()=>({...v.refs,setReference:p,setPositionReference:T,domReference:m}),[v.refs,p,T]),S=u.useMemo(()=>({...v.elements,domReference:d}),[v.elements,d]),x=u.useMemo(()=>({...v,...r,refs:E,elements:S,nodeId:e}),[v,E,S,e,r]);return V(()=>{r.dataRef.current.floatingContext=x;const R=h==null?void 0:h.nodesRef.current.find(w=>w.id===e);R&&(R.context=x)}),u.useMemo(()=>({...v,context:x,refs:E,elements:S}),[v,E,S,x])}function ge(t,e,n){const r=new Map,o=n==="item";let i=t;if(o&&t){const{[Le]:s,[Oe]:a,...l}=t;i=l}return{...n==="floating"&&{tabIndex:-1,[zt]:""},...i,...e.map(s=>{const a=s?s[n]:null;return typeof a=="function"?t?a(t):null:a}).concat(t).reduce((s,a)=>(a&&Object.entries(a).forEach(l=>{let[f,d]=l;if(!(o&&[Le,Oe].includes(f)))if(f.indexOf("on")===0){if(r.has(f)||r.set(f,[]),typeof d=="function"){var m;(m=r.get(f))==null||m.push(d),s[f]=function(){for(var h,v=arguments.length,T=new Array(v),p=0;p<v;p++)T[p]=arguments[p];return(h=r.get(f))==null?void 0:h.map(E=>E(...T)).find(E=>E!==void 0)}}}else s[f]=d}),s),{})}}function hn(t){t===void 0&&(t=[]);const e=t.map(a=>a==null?void 0:a.reference),n=t.map(a=>a==null?void 0:a.floating),r=t.map(a=>a==null?void 0:a.item),o=u.useCallback(a=>ge(a,t,"reference"),e),i=u.useCallback(a=>ge(a,t,"floating"),n),s=u.useCallback(a=>ge(a,t,"item"),r);return u.useMemo(()=>({getReferenceProps:o,getFloatingProps:i,getItemProps:s}),[o,i,s])}const yn=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Rn(t,e){var n,r;e===void 0&&(e={});const{open:o,elements:i,floatingId:s}=t,{enabled:a=!0,role:l="dialog"}=e,f=ie(),d=((n=i.domReference)==null?void 0:n.id)||f,m=u.useMemo(()=>{var x;return((x=At(i.floating))==null?void 0:x.id)||s},[i.floating,s]),h=(r=yn.get(l))!=null?r:l,T=Ee()!=null,p=u.useMemo(()=>h==="tooltip"||l==="label"?{["aria-"+(l==="label"?"labelledby":"describedby")]:o?m:void 0}:{"aria-expanded":o?"true":"false","aria-haspopup":h==="alertdialog"?"dialog":h,"aria-controls":o?m:void 0,...h==="listbox"&&{role:"combobox"},...h==="menu"&&{id:d},...h==="menu"&&T&&{role:"menuitem"},...l==="select"&&{"aria-autocomplete":"none"},...l==="combobox"&&{"aria-autocomplete":"list"}},[h,m,T,o,d,l]),E=u.useMemo(()=>{const x={id:m,...h&&{role:h}};return h==="tooltip"||l==="label"?x:{...x,...h==="menu"&&{"aria-labelledby":d}}},[h,m,d,l]),S=u.useCallback(x=>{let{active:R,selected:w}=x;const I={role:"option",...R&&{id:m+"-fui-option"}};switch(l){case"select":case"combobox":return{...I,"aria-selected":w}}return{}},[m,l]);return u.useMemo(()=>a?{reference:p,floating:E,item:S}:{},[a,p,E,S])}const je=t=>t.replace(/[A-Z]+(?![a-z])|[A-Z]/g,(e,n)=>(n?"-":"")+e.toLowerCase());function Z(t,e){return typeof t=="function"?t(e):t}function En(t,e){const[n,r]=u.useState(t);return t&&!n&&r(!0),u.useEffect(()=>{if(!t&&n){const o=setTimeout(()=>r(!1),e);return()=>clearTimeout(o)}},[t,n,e]),n}function xn(t,e){e===void 0&&(e={});const{open:n,elements:{floating:r}}=t,{duration:o=250}=e,s=(typeof o=="number"?o:o.close)||0,[a,l]=u.useState("unmounted"),f=En(n,s);return!f&&a==="close"&&l("unmounted"),V(()=>{if(r){if(n){l("initial");const d=requestAnimationFrame(()=>{Re.flushSync(()=>{l("open")})});return()=>{cancelAnimationFrame(d)}}l("close")}},[n,r]),{isMounted:f,status:a}}function wn(t,e){e===void 0&&(e={});const{initial:n={opacity:0},open:r,close:o,common:i,duration:s=250}=e,a=t.placement,l=a.split("-")[0],f=u.useMemo(()=>({side:l,placement:a}),[l,a]),d=typeof s=="number",m=(d?s:s.open)||0,h=(d?s:s.close)||0,[v,T]=u.useState(()=>({...Z(i,f),...Z(n,f)})),{isMounted:p,status:E}=xn(t,{duration:s}),S=G(n),x=G(r),R=G(o),w=G(i);return V(()=>{const I=Z(S.current,f),A=Z(R.current,f),O=Z(w.current,f),M=Z(x.current,f)||Object.keys(I).reduce((k,F)=>(k[F]="",k),{});if(E==="initial"&&T(k=>({transitionProperty:k.transitionProperty,...O,...I})),E==="open"&&T({transitionProperty:Object.keys(M).map(je).join(","),transitionDuration:m+"ms",...O,...M}),E==="close"){const k=A||I;T({transitionProperty:Object.keys(k).map(je).join(","),transitionDuration:h+"ms",...O,...k})}},[h,R,S,x,w,m,E,f]),{isMounted:p,styles:v}}function Cn({children:t,text:e,colorScheme:n,placement:r,offset:o=4,transitionStyles:i,hoverRestMs:s=150,withArrow:a=!1}){const[l,f]=u.useState(!1),d=u.useRef(null),{context:m,refs:h,floatingStyles:v}=bn({open:l,onOpenChange:f,placement:r,middleware:[Gt(),Ut(o),Xt({padding:8}),a?Zt({element:d}):null],whileElementsMounted:mt}),T=un(m,{restMs:s}),p=pn(m),E=Rn(m,{role:"tooltip"}),{getReferenceProps:S,getFloatingProps:x}=hn([T,p,E]),{isMounted:R,styles:w}=wn(m,i);return B.jsxs(B.Fragment,{children:[u.cloneElement(t,{ref:h.setReference,...S()}),R&&B.jsx(fn,{children:B.jsxs("div",{ref:h.setFloating,className:Se("tooltip"),style:{...v,...w},"data-color-scheme":n,...x(),children:[e,a&&B.jsx(nn,{ref:d,context:m,className:Se("tooltip-arrow")})]})})]})}export{Cn as Tooltip};
